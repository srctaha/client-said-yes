"use strict";document.addEventListener("DOMContentLoaded",()=>{const l=500,u=300,n=5,r=768;let t=window.innerWidth<=r,i=null,a=null,s=null;const e=document.createElement("div");e.className="footnote-tooltip",e.style.display="none",document.body.appendChild(e);function d(t){const s=t.getBoundingClientRect(),o=e.offsetWidth,a=e.offsetHeight,r=window.innerWidth,c=window.innerHeight;let n=s.left+s.width/2-o/2,i=s.bottom+window.scrollY+5;n<0&&(n=0),n+o>r&&(n=r-o),i+a>window.scrollY+c&&(i=s.top+window.scrollY-a-5),e.style.left=`${n}px`,e.style.top=`${i}px`}function c(n){if(t)return;clearTimeout(a),clearTimeout(s),a=setTimeout(()=>{const s=n.getAttribute("href").slice(1),t=document.getElementById(s);if(t){const s=t.cloneNode(!0),a=s.querySelector(".footnote-backref");a&&a.remove(),s.querySelectorAll("p").forEach(e=>{e.innerHTML.trim()===""&&e.remove()});let o=s.innerHTML.trim();o=o.replace(/^(<br\s*\/?>)*|(<br\s*\/?>)*$/g,""),e.innerHTML=o,e.style.display="block",d(n),i=n}},l)}function o(){if(t)return;clearTimeout(a),s=setTimeout(()=>{e.style.display="none",i=null},u)}const h=m(()=>{t=window.innerWidth<=r},100);window.addEventListener("resize",h),document.addEventListener("click",n=>{let s=n.target.closest('sup[id^="fnref"] a, .footnote-backref');s?!t&&s.closest('sup[id^="fnref"]')&&c(s):!t&&!e.contains(n.target)&&n.target!==i&&o()}),document.addEventListener("mouseover",e=>{if(t)return;let n=e.target.closest('sup[id^="fnref"] a');n&&c(n)}),document.addEventListener("mouseout",e=>{if(t)return;let s=e.target.closest('sup[id^="fnref"] a');if(s){const t=s.getBoundingClientRect();(e.clientX<t.left-n||e.clientX>t.right+n||e.clientY<t.top-n||e.clientY>t.bottom+n)&&o()}},{passive:!0}),e.addEventListener("mouseover",()=>{if(t)return;clearTimeout(s)}),e.addEventListener("mouseout",s=>{if(t)return;const i=e.getBoundingClientRect();(s.clientX<i.left-n||s.clientX>i.right+n||s.clientY<i.top-n||s.clientY>i.bottom+n)&&o()});function m(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>e.apply(this,s),t)}}})